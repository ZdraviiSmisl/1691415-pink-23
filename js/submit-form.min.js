const isValidEmail=e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase()),isValidPhone=e=>/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(String(e).toLowerCase()),form=document.body.querySelector(".request-form"),lastNameInput=form.querySelector(".form__last-name"),firstNameInput=form.querySelector(".form__first-name"),patronymicInput=form.querySelector(".form__patronymic"),emailInput=form.querySelector(".form__email"),phoneInput=form.querySelector(".form__phone"),linkSubmit=form.querySelector("input[type='submit']"),modalError=document.body.querySelector(".form-error"),modalSuccess=document.body.querySelector(".modal__success"),closeModalError=document.body.querySelector(".modal-close"),closeModalSuccess=document.body.querySelector(".modal__button"),inputsForm=form.querySelectorAll("input"),requiredFields=form.querySelectorAll("input[required]");let isStorageSupport=!0,firstName="",lustName="",patronymic="",mail="",phone="";try{firstName=localStorage.getItem("nameUser"),lustName=localStorage.getItem("lustNameUser"),patronymic=localStorage.getItem("patronymicUser"),phone=localStorage.getItem("phoneUser"),mail=localStorage.getItem("emailUser")}catch(e){isStorageSupport=!1}function submitForm(){return form.reset(),linkSubmit.disabled=!0,!1}function enableButton(){let e=!0;0==firstNameInput.value||0==lastNameInput.value||0==emailInput.value?(e=!1,linkSubmit.classList.remove("form__btn-submit"),linkSubmit.classList.add("form__btn-disabled")):(linkSubmit.classList.remove("form__btn-disabled"),linkSubmit.classList.add("form__btn-submit")),linkSubmit.disabled=!e}window.onload=enableButton,form.addEventListener("submit",(e=>{emailInput.value&&firstNameInput.value&&lastNameInput.value?isStorageSupport&&(localStorage.setItem("nameUser",firstNameInput.value),localStorage.setItem("surnameUser",lastNameInput.value),localStorage.setItem("patronymicUser",patronymicInput.value),localStorage.setItem("phoneUser",phoneInput.value),localStorage.setItem("emailUser",emailInput.value)):e.preventDefault()})),linkSubmit.addEventListener("click",(()=>{emailInput.value&&firstNameInput.value&&lastNameInput.value&&phoneInput.value?modalSuccess.classList.add("page__modal-show"):modalError.style.display="block"})),closeModalError.addEventListener("click",(e=>{e.preventDefault(),modalError.style.display="none"})),closeModalSuccess.addEventListener("click",(e=>{e.preventDefault(),modalSuccess.classList.remove("page__modal-show"),linkSubmit.classList.remove("form__btn-submit"),linkSubmit.classList.add("form__btn-disabled")})),window.addEventListener("keydown",(e=>{27===e.keyCode&&(e.preventDefault(),modalSuccess.classList.contains("page__modal-show")?modalSuccess.classList.remove("page__modal-show"):"block"===modalError.style.display&&(modalError.style.display="none"))}));